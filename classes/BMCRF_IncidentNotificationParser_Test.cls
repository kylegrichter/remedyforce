@isTest
public class BMCRF_IncidentNotificationParser_Test
{
    static testMethod void test()
    {
        String json='{ "message": "OK", "firstPageUri": "https://api.everbridge.net/rest/incidentNotifications/453003085612786/5748251084982358/?pageNumber=1", "lastPageUri": "https://api.everbridge.net/rest/incidentNotifications/453003085612786/5748251084982358/?pageNumber=1", "page": { "pageSize": 10, "start": 0, "data": [ { "startDate": 1453901099008, "accountId": 892807736722576, "incidentPhase": { "createdName": "VL_Remedyforce User", "incidentId": 5748251084982358, "accountId": 892807736722576, "status": "A", "resourceBundleId": 453003085613479, "organizationId": 453003085612786, "id": 10011, "notificationId": -1, "phaseTemplate": { "templateId": 3083034899254932, "templateName": "Integration Template-Copy-Copy", "name": "New", "messageFlag": 0, "contactsFlag": 0, "settingsFlag": 0, "phaseDefinitions": [ { "id": 1001, "status": "A", "isDefault": false, "seq": 0 } ], "formTemplate": { "subject": "NEW: 00000121 - Priority 1 - TestQueue", "preMessage": "Test", "formVariableItems": [ { "val": [ "00000121" ], "variableName": "Incident ID", "isRequired": true, "seq": 1, "variableId": 444206992589700 }, { "val": [ "null" ], "variableName": "Company", "isRequired": true, "seq": 2, "variableId": 444206992589701 }, { "val": [ "null" ], "variableName": "Contact", "isRequired": true, "seq": 3, "variableId": 444206992589702 }, { "val": [ "1" ], "variableName": "Priority", "isRequired": true, "seq": 4, "variableId": 444206992589710 }, { "val": [ "null" ], "variableName": "Configuration Item", "isRequired": false, "seq": 5, "variableId": 444206992589711 }, { "val": [ "Email" ], "variableName": "Service", "isRequired": false, "seq": 6, "variableId": 2203425597031041 }, { "val": [ "TestQueue" ], "variableName": "Queue", "isRequired": true, "seq": 7, "variableId": 3083034899254133 }, { "val": [ "Test" ], "variableName": "Description", "isRequired": true, "seq": 8, "variableId": 444206992589703 }, { "val": [ "null" ], "variableName": "Notes", "isRequired": true, "seq": 9, "variableId": 444206992589704 }, { "val": [ "Email" ], "variableName": "Category", "isRequired": false, "seq": 10, "variableId": 444206992589712 } ] }, "broadcastTemplate": { "accountId": 0, "broadcastContacts": { "groupIds": [ null ], "contactIds": [ null ], "contactSearchType": "AllOr" }, "resourceBundleId": 0, "organizationId": 0, "publicMessages": {}, "type": "Standard", "id": 0, "message": { "accountId": 892807736722576, "organizationId": 453003085612786, "contentType": "Text", "id": 0, "title": "NEW: 00000121 - Priority 1 - TestQueue", "textMessage": "Test.", "conferenceBridgeId": 0, "createdDate": 1453901098942, "createdName": "VL_Remedyforce User", "status": "A", "resourceBundleId": 453003085613479, "lastModifiedDate": 1453901098942, "lastModifiedId": 444206992595208, "createdId": 444206992595208, "lastModifiedName": "VL_Remedyforce User", "rtfContent": "" }, "broadcastSettings": { "voiceMailOption": "MESSAGE_ONLY", "throttlDefaultAmount": 0, "throttle": false, "mobileSettings": { "requestComment": true, "requestImage": true, "requestLocation": true, "allowShare": false, "requireConfirm": false, "pushAlertEnabled": false }, "deliverPaths": [ { "accountId": 892807736722576, "pathId": 241901148045325, "organizationId": 453003085612786, "awarePathId": 29130309, "id": 444206992591362, "expose": true, "isDefault": true, "createdDate": 1441111357477, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": false, "seq": 1, "lastModifiedDate": 1444922318635, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Mobile App", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045316, "organizationId": 453003085612786, "awarePathId": 29130259, "id": 444206992591357, "expose": false, "isDefault": true, "createdDate": 1441111285611, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": false, "seq": 2, "lastModifiedDate": 1444922318635, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Work Email", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045324, "organizationId": 453003085612786, "awarePathId": 29130299, "id": 444206992591361, "expose": true, "isDefault": true, "createdDate": 1441111330662, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": true, "seq": 3, "lastModifiedDate": 1444922318636, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "SMS", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045319, "organizationId": 453003085612786, "awarePathId": 29130289, "id": 444206992591360, "expose": true, "isDefault": true, "createdDate": 1441111309094, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": true, "seq": 4, "lastModifiedDate": 1444922318637, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Mobile Phone", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true } ], "requirePinForMessage": false, "deliveryMethodInterval": 1, "bookConference": false, "cycleInterval": 1, "duration": 1, "senderCallerInfos": [ { "countryName": "United States", "accountId": 0, "countryCode": "US", "resourceBundleId": 0, "organizationId": 0, "id": 0, "callerId": "8182309700", "isDefault": true, "createdId": 0, "lastModifiedId": 0 } ], "contactCycles": 1, "language": "en_US", "recipientApp": true, "senderEmail": "remedyforce_alerts@everbridge.com", "confirm": true, "deliveryPathOrder": "Organization" }, "priority": "NonPriority", "lastModifiedId": 0, "createdId": 0 }, "ignoreVariable": true, "evaluateAll": false }, "name": "New", "lastModifiedDate": 1453901098935, "lastModifiedId": 444206992595208, "createdId": 444206992595208, "createdDate": 1453901098935, "lastModifiedName": "VL_Remedyforce User", "phaseDefinition": { "phaseNodeType": "Begin", "id": 1001, "incidentStatus": "Open", "status": "A", "isDefault": true, "name": "New", "seq": 100 } }, "endDate": 1453904699008, "transformed": true, "organizationId": 453003085612786, "type": "Standard", "id": 5748251085266930, "notificationStatus": "Completed", "productSource": "Matrix", "priority": "NonPriority", "oldAwareCAMPID": 0, "createdDate": 1453901099008, "hasNotification": true, "createdName": "VL_Remedyforce User", "status": "A", "resourceBundleId": 453003085613479, "launchtype": "SendNow", "publicMessages": {}, "message": { "accountId": 892807736722576, "organizationId": 453003085612786, "contentType": "Text", "id": 0, "title": "NEW: 00000121 - Priority 1 - TestQueue", "textMessage": "Test.", "conferenceBridgeId": 0, "createdDate": 1453901098942, "createdName": "VL_Remedyforce User", "status": "A", "resourceBundleId": 453003085613479, "lastModifiedDate": 1453901098942, "lastModifiedId": 444206992595208, "createdId": 444206992595208, "lastModifiedName": "VL_Remedyforce User", "rtfContent": "" }, "broadcastSettings": { "voiceMailOption": "MESSAGE_ONLY", "throttlDefaultAmount": 0, "throttle": false, "mobileSettings": { "requestComment": true, "requestImage": true, "requestLocation": true, "allowShare": false, "requireConfirm": false, "pushAlertEnabled": false }, "deliverPaths": [ { "accountId": 892807736722576, "pathId": 241901148045325, "organizationId": 453003085612786, "awarePathId": 29130309, "id": 444206992591362, "expose": true, "isDefault": true, "createdDate": 1441111357477, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": false, "seq": 1, "lastModifiedDate": 1444922318635, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Mobile App", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045316, "organizationId": 453003085612786, "awarePathId": 29130259, "id": 444206992591357, "expose": false, "isDefault": true, "createdDate": 1441111285611, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": false, "seq": 2, "lastModifiedDate": 1444922318635, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Work Email", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045324, "organizationId": 453003085612786, "awarePathId": 29130299, "id": 444206992591361, "expose": true, "isDefault": true, "createdDate": 1441111330662, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": true, "seq": 3, "lastModifiedDate": 1444922318636, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "SMS", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true }, { "accountId": 892807736722576, "pathId": 241901148045319, "organizationId": 453003085612786, "awarePathId": 29130289, "id": 444206992591360, "expose": true, "isDefault": true, "createdDate": 1441111309094, "createdName": "Lisa Radley_ITADemo", "status": "A", "mandatory": false, "resourceBundleId": 453003085613479, "editable": true, "seq": 4, "lastModifiedDate": 1444922318637, "lastModifiedId": 3083034899266633, "createdId": 3083034899266633, "prompt": "Mobile Phone", "lastModifiedName": "Lisa Radley_ITADemo", "extRequired": false, "displayFlag": false, "default": true } ], "requirePinForMessage": false, "deliveryMethodInterval": 1, "bookConference": false, "cycleInterval": 1, "duration": 1, "senderCallerInfos": [ { "countryName": "United States", "accountId": 0, "countryCode": "US", "resourceBundleId": 0, "organizationId": 0, "id": 0, "callerId": "8182309700", "isDefault": true, "createdId": 0, "lastModifiedId": 0 } ], "contactCycles": 1, "language": "en_US", "recipientApp": true, "senderEmail": "remedyforce_alerts@everbridge.com", "confirm": true, "deliveryPathOrder": "Organization" }, "sourceTemplateId": 0, "source": "Api", "notificationName": "NEW: 00000121 - Priority 1 - TestQueue", "batchNotificationId": 0, "stoppedBy": 0, "lastModifiedDate": 1453904820021, "lastModifiedId": 444206992595208, "createdId": 444206992595208, "processedBy": "us1api04", "lastModifiedName": "VL_Remedyforce User", "incident": { "accountId": 892807736722576, "organizationId": 453003085612786, "id": 5748251084982358, "incidentStatus": "Open", "name": "INC00000121", "createdDate": 1453901098935, "hasJournal": false, "createdName": "VL_Remedyforce User", "status": "A", "resourceBundleId": 453003085613479, "duration": 0, "createdId": 444206992595208, "lastModifiedId": 444206992595208, "lastModifiedDate": 1453901098935, "phaseStatus": { "phaseNodeType": "Begin", "id": 1001, "incidentStatus": "Open", "status": "A", "isDefault": true, "name": "New", "seq": 100 }, "lastModifiedName": "VL_Remedyforce User", "incidentAction": "Launch" } } ], "totalCount": 1, "totalPageCount": 1, "currentPageNo": 1 } }';
        Test.startTest();
        BMCRF_IncidentNotificationParser.parse(json);
        Test.stopTest();
    }
}